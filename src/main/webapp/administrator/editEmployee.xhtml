<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:h="http://xmlns.jcp.org/jsf/html">
    <body>
        <ui:composition template="./adminPagesTemplate.xhtml">
            <ui:define name="title">
                ${msgs.update_employee_profile}
            </ui:define>
            <ui:define name="content">
                <f:view>
                    <h:form enctype="multipart/form-data">
                        <p:messages  />
                        <h1><h:outputText value="#{create_edit_employee}"/></h1>
                        <table border="0">
                            <tr >
                                <td  style="vertical-align: top">
                                    <h:graphicImage value="#{updateEmployeeCDIBean.photoPath}" height="100px" width="100px"  />
                                </td>
                                <td>
                                    <p:panelGrid columns="4">
                                        <p:outputLabel value="#{msgs.identity_card_number}:" for="identityCardNumber" />
                                        <p:inputText id="identityCardNumber" value="#{updateEmployeeCDIBean.employee.identityCardNumber}" />
                                        <p:outputLabel value="#{msgs.social_security_number}:" for="socialSecurityNumber" />
                                        <p:inputText id="socialSecurityNumber" value="#{updateEmployeeCDIBean.employee.socialSecurityNumber}"
                                                     required="true" requiredMessage="#{msgs.required_social_security_number}"/>
                                        <p:outputLabel value="#{msgs.first_name}:" for="firstName" />
                                        <p:inputText id="firstName" value="#{updateEmployeeCDIBean.employee.firstName}"  
                                                     required="true" requiredMessage="#{msgs.required_first_name}"/>
                                        <p:outputLabel value="#{msgs.last_name}:" for="lastName" />
                                        <p:inputText id="lastName" value="#{updateEmployeeCDIBean.employee.lastName}" 
                                                     required="true" requiredMessage="#{msgs.required_last_name}"/>
                                        <p:outputLabel value="#{msgs.gender}:" for="gender" />
                                        <p:selectOneMenu id="gender" value="#{updateEmployeeCDIBean.employee.gender}">
                                            <f:selectItem itemLabel="#{msgs.male}" itemValue="1"/>
                                            <f:selectItem itemLabel="#{msgs.female}" itemValue="2"/>
                                        </p:selectOneMenu>                                  
                                        <p:outputLabel value="#{msgs.province}:" for="province" />
                                        <p:inputText id="province" value="#{updateEmployeeCDIBean.employee.province}" />
                                        <p:outputLabel value="#{msgs.address}:" for="address" />
                                        <p:inputText id="address" value="#{updateEmployeeCDIBean.employee.address}" 
                                                     required="true" requiredMessage="#{msgs.required_address}."/>
                                        <p:outputLabel value="#{msgs.postal_code}:" for="postalCode" />
                                        <p:inputText id="postalCode" value="#{updateEmployeeCDIBean.employee.postalCode}"
                                                     required="true" requiredMessage="#{msgs.required_postal_code}."/>
                                        <p:outputLabel value="#{msgs.city}" for="city" />
                                        <p:inputText id="city" value="#{updateEmployeeCDIBean.employee.city}" 
                                                     required="true" requiredMessage="#{msgs.required_city}."/>
                                        <p:outputLabel value="#{msgs.country}:" for="country" />
                                        <p:selectOneMenu id="country" value="#{updateEmployeeCDIBean.employee.country}" required="true" requiredMessage="#{msgs.reuired_country}.">  
                            <f:selectItems value="#{updateEmployeeCDIBean.countries}" var="country"
                        actionListener="" itemLabel="#{updateEmployeeCDIBean.getCountryName(country)}" itemValue="#{updateEmployeeCDIBean.getCountryCode(country)}" />
                                        </p:selectOneMenu>
                                        <p:outputLabel value="#{msgs.date_of_birth}:" for="dateOfBirth" />
                                        <p:calendar id="dateOfBirth" yearRange="c-70:c"
                                                    value="#{updateEmployeeCDIBean.employee.dateOfBirth}" 
                                                    showOn="button" navigator="true" pattern="dd/MM/yyyy" />
                                        <p:outputLabel value="#{msgs.phone_private}:" for="phonePrivate" />
                                        <p:inputText id="phonePrivate" value="#{updateEmployeeCDIBean.employee.phonePrivate}" validatorMessage="#{msgs.invalid_phone_number}">
                                            <f:validateRegex
                                                pattern="\d*" /></p:inputText>
                                        <p:outputLabel value="#{msgs.phone_mobile}:" for="phoneMobile" />
                                        <p:inputText id="phoneMobile" value="#{updateEmployeeCDIBean.employee.phoneMobile}" 
                                                     required="true" requiredMessage="#{msgs.required_mobie}." validatorMessage="#{msgs.invalid_phone_number}">
                                            <f:validateRegex pattern="\d+" /></p:inputText>
                                        <p:outputLabel value="#{msgs.email}:" for="email" />
                                        <p:inputText id="email" value="#{updateEmployeeCDIBean.employee.email}" 
                                                     required="true" requiredMessage="#{msgs.required_email}." validatorMessage="#{msgs.invalid_email_format}">
                                            <f:validateRegex
                                                pattern="([^.@]+)(\.[^.@]+)*@([^.@]+\.)+([^.@]+)" /></p:inputText>
                                        <p:outputLabel value="#{msgs.photo}:" for="photoPath" />
                                        <p:fileUpload id="photoPath" value="#{updateEmployeeCDIBean.photograph}"
                                                      allowTypes="/(\.|\/)(gif|jpe?g|png)$/" mode="simple"  />
                                        <p:outputLabel value="#{msgs.username}:" for="username" />
                                        <p:inputText id="username" value="#{updateEmployeeCDIBean.employee.username}" 
                                                     required="true" requiredMessage="#{msgs.required_username}."/>

                                        <p:outputLabel value="#{msgs.password}" for="pwd" />
                                        <p:password id="pwd" value="#{updateEmployeeCDIBean.password}" 
                                                    match="confirm" />

                                        <p:outputLabel for="confirm" value="#{msgs.confirm_password}" />
                                        <p:password id="confirm" value="#{updateEmployeeCDIBean.password}" />


                                        <p:outputLabel value="#{msgs.marital_status}:" for="maritalStatus" />
                                        <p:selectOneMenu id="maritalStatus" value="#{updateEmployeeCDIBean.employee.maritalStatus}">
                                            <f:selectItem itemLabel="#{msgs.married}" itemValue="M"/>
                                            <f:selectItem itemLabel="#{msgs.single}" itemValue="S"/>
                                        </p:selectOneMenu>

                                        <p:outputLabel value="#{msgs.number_of_children}:" for="numberOfChildren" />
                                        <p:inputText id="numberOfChildren" value="#{updateEmployeeCDIBean.employee.numberOfChildren}" />
                                        <p:outputLabel value="#{msgs.role}:" for="role" />
                                        <p:selectOneMenu id="role" value="#{updateEmployeeCDIBean.employee.role}">
                                            <f:selectItem itemLabel="#{msgs.head_of_department}" itemValue="depthead"/>
                                            <f:selectItem itemLabel="#{msgs.hr_recruiter}" itemValue="hrrecruiter"/>
                                            <f:selectItem itemLabel="#{msgs.hrm_employee}" itemValue="hrmemployee" />
                                            <f:selectItem itemLabel="#{msgs.administrator}" itemValue="administrator" />
                                            <f:selectItem itemLabel="#{msgs.employee}" itemValue="employee"/>
                                        </p:selectOneMenu>

                                        <p:outputLabel value="#{msgs.department_name}:" />
                                        <p:selectOneMenu converter="#{departmentConverter}"  
                                                         value="#{updateEmployeeCDIBean.employee.departmentIddepartment}">
                                            <f:selectItems value="#{updateEmployeeCDIBean.departments}" />
                                        </p:selectOneMenu>


                                        <h:commandButton id="back" value="#{msgs.back}" action="updateEmployee"  immediate="true" />  
                                        <h:commandButton id="update" value="Update" action="#{updateEmployeeCDIBean.update()}" />
                                    </p:panelGrid>
                                </td>
                            </tr>
                        </table>
                    </h:form>
                </f:view>
            </ui:define>
        </ui:composition>
    </body>
</html>
